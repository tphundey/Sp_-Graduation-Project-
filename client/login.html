<!DOCTYPE html>
<html lang="en">

<head>
	<title>Login page</title>
	<!-- Meta tag Keywords -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="keywords"
		content="Modern Login Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements" />
	<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false);
    function hideURLbar(){ window.scrollTo(0,1); } </script>
	<!-- Meta tag Keywords -->
	<!-- css files -->
	<link rel="stylesheet" href="css2/style.css" type="text/css" media="all" /> <!-- Style-CSS -->
	<link rel="stylesheet" href="css2/font-awesome.css"> <!-- Font-Awesome-Icons-CSS -->
	<!-- //css files -->
	<!-- web-fonts -->
	<link href="//fonts.googleapis.com/css?family=Snippet" rel="stylesheet"><!--online fonts-->
	<!-- //web-fonts -->
</head>

<body>
	<div style="background-color: aquamarine;">
		<div class="main-container">
			<!--header-->
			<div class="header-w3l">
				<h1>Login Form</h1>
			</div>
			<!--//header-->
			<!--main-->
			<div class="main-content-agile">
				<div class="w3ls-pro">
					<h2>Login Now</h2>
				</div>
				<div class="sub-main-w3ls">
					<form id="loginForm">
						<input placeholder="Enter your E-mail" name="email" type="email" required="">
						<span class="icon1"><i class="fa fa-envelope" aria-hidden="true"></i></span>
						<input placeholder="Enter Password" name="password" type="password" required="">
						<span class="icon2"><i class="fa fa-unlock-alt" aria-hidden="true"></i></span>
						<div class="checkbox-w3">
							<span class="check-w3"><input type="checkbox" />Remember Me</span>
							<a href="http://127.0.0.1:5501/client/resetpass.html">Forgot Password?</a>
							<div class="clear"></div>
						</div>
						<div class="social-icons">
							<ul>
								<li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
								<li><a href="#"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li>
							</ul>
						</div>
						<input type="submit" value="">
					</form>
				</div>
			</div>
			<!--//main-->
			<!--footer-->
			<div class="footer">

			</div>
			<!--//footer-->
		</div>
	</div>
	<!-- js -->
	<script type="text/javascript" src="js2/jquery-2.1.4.min.js"></script><!--common-js-->
	<script src="js2/jquery.vide.min.js"></script><!--video-js-->
	<!-- //js -->
	<script>
		document.addEventListener('DOMContentLoaded', function () {
			var form = document.getElementById('loginForm');

			form.addEventListener('submit', function (event) {
				event.preventDefault();

				var email = document.querySelector('input[name="email"]').value;
				var password = document.querySelector('input[name="password"]').value;

				// Send GET request to API to check login
				fetch('http://localhost:3000/user')
					.then(response => {
						if (!response.ok) {
							throw new Error('Network response was not ok');
						}
						return response.json();
					})
					.then(data => {
						// Handle response from server
						var found = false;
						for (var i = 0; i < data.length; i++) {
							if (data[i].email === email && data[i].password === password) {
								// Login successful
								found = true;
								break;
							}
						}
						if (found) {
							// Login successful, set cookie and redirect
							document.cookie = "user_email=" + email + "; expires=Thu, 18 Dec 2025 12:00:00 UTC; path=/";
							window.location.href = "/dashboard"; // Redirect to dashboard page
						} else {
							alert("Login failed. Please check your email and password.");
						}
					})
					.catch(error => {
						console.error('There has been a problem with your fetch operation:', error);
					});
			});
		});
	</script>
</body>

</html>
<!DOCTYPE html>
<html>
<head>
    <title>Signup Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Official Signup Form Responsive, Login form web template,Flat Pricing tables,Flat Drop downs  Sign up Web Templates, Flat Web Templates, Login signup Responsive web template, Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <link href="//fonts.googleapis.com/css?family=Raleway:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Monoton" rel="stylesheet">
    <link href="css3/font-awesome.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="css3/style.css" rel='stylesheet' type='text/css' media="all" />
</head>
<body>
    <h1 class="w3ls">Signup Form</h1>
    <div class="content-w3ls">
        <div class="content-agile1">
            <h2 class="agileits1">Official</h2>
            <p class="agileits2">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
        </div>
        <div class="content-agile2">
            <form id="signupForm" method="post">
                <div class="form-control w3layouts"> 
                    <input type="text" id="firstname" name="firstname" placeholder="First Name" title="Please enter your First Name" required="">
                </div>

                <div class="form-control w3layouts">    
                    <input type="email" id="email" name="email" placeholder="mail@example.com" title="Please enter a valid email" required="">
                </div>

                <div class="form-control agileinfo">    
                    <input type="password" class="lock" name="password" id="password1" placeholder="Password" required="">
                </div>   

                <div class="form-control agileinfo">    
                    <input type="password" class="lock" name="confirm-password" id="password2" placeholder="Confirm Password" required="">
                </div>   

                <span id="passwordError" style="color: red;"></span>

                <input type="submit" class="register" value="Register">
            </form>
            <p class="wthree w3l" id="errorMessage" style="color: green; display: none;">Account created successfully!</p>
            <p class="wthree w3l" id="errorMessage" style="color: red; display: none;">Failed to create account!</p>
        </div>
        <div class="clear"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var form = document.getElementById('signupForm');
            form.addEventListener('submit', function (event) {
                event.preventDefault(); // Ngăn chặn form submit mặc định

                var firstName = document.getElementById('firstname').value;
                var email = document.getElementById('email').value;
                var password = document.getElementById('password1').value;
                var confirmPassword = document.getElementById('password2').value;

                if (!validateForm(firstName, email, password, confirmPassword)) {
                    return;
                }

                var data = {
                    firstname: firstName,
                    email: email,
                    password: password
                };

                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'http://localhost:3000/user', true);
                xhr.setRequestHeader('Content-Type', 'application/json');

                xhr.onload = function () {
                    if (xhr.status === 200) {
                        document.getElementById('successMessage').style.display = 'block';
                        clearForm();
                    } else {
                        document.getElementById('errorMessage').style.display = 'block';
                    }
                };

                xhr.send(JSON.stringify(data));
            });
        });

        function validateForm(firstName, email, password, confirmPassword) {
            var passwordError = document.getElementById('passwordError');
            passwordError.textContent = "";

            if (password !== confirmPassword) {
                passwordError.textContent = "Passwords do not match";
                return false;
            }

            if (password.length < 6) {
                passwordError.textContent = "Password must be at least 6 characters long";
                return false;
            }

            // Add more validation rules as needed...

            return true;
        }

        function clearForm() {
            document.getElementById('firstname').value = "";
            document.getElementById('email').value = "";
            document.getElementById('password1').value = "";
            document.getElementById('password2').value = "";
        }
    </script>

</body>
</html>
